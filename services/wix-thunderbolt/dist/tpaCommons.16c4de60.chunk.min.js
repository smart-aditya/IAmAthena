(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[118],{235:function(e,t,n){"use strict";n.r(t),n.d(t,"site",(function(){return m})),n.d(t,"editor",(function(){return v}));var r=n(57),a=n(420),o=n(596),i=n(603),c=n(237);n.d(t,"MasterPageTpaPropsCacheSymbol",(function(){return c.a})),n.d(t,"TpaSrcBuilderSymbol",(function(){return c.f})),n.d(t,"TpaContextMappingSymbol",(function(){return c.b}));var u=n(597),d=n(599),s=n(598),l=n(600),p=n(601),f=n(602);n.d(t,"TpaHandlersManagerSymbol",(function(){return c.d})),n.d(t,"TpaSectionSymbol",(function(){return c.e})),n.d(t,"name",(function(){return c.g})),n.d(t,"TpaDataCapsuleSymbol",(function(){return c.c}));var g=n(504);for(var b in g)["default","site","editor","TpaHandlersManagerSymbol","TpaSectionSymbol","name","TpaDataCapsuleSymbol","MasterPageTpaPropsCacheSymbol","TpaSrcBuilderSymbol","TpaContextMappingSymbol"].indexOf(b)<0&&function(e){n.d(t,e,(function(){return g[e]}))}(b);var m=function(e){e(r.a.AppDidMountHandler).to(o.a),e(c.a).to(u.a),e(c.b).to(s.a),e(c.f).to(d.a),e(c.e).to(l.a),e(a.c).to(p.c),e(a.c).to(p.g),e(a.c).to(p.f),e(a.c).to(p.b),e(a.c).to(p.e),e(a.c).to(p.d),e(a.c).to(p.h),e(a.c).to(p.a),e(c.c).to(f.a)},v=function(e){e(a.a).to(i.a),e(c.f).to(d.a),e(c.e).to(l.a),e(a.c).to(p.c),e(a.c).to(p.g),e(a.c).to(p.f),e(a.c).to(p.d),e(a.c).to(p.h),e(a.c).to(p.a)}},503:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=function(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}},a=function(e){return e&&["TPA","TPA2"].includes(e.intent)},o=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"]},504:function(e,t){},573:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a=function(e,t){var n=e.split("/"),a=n.indexOf(t||"");return a<0||n[a]!==t?null:Object(r.e)(n.splice(a)).slice(1)}},596:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(7),o=n(412),i=n(34),c=n(10),u=n(237),d=n(270),s=n(129),l=n(503),p=Object(a.h)([d.a,c.a,u.b,o.d,o.b,i.f,Object(a.g)(s.a)],(function(e,t,n,a,o,i,c){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!(!e.source||!Object(l.b)(Object(l.c)(e)))},handleEvent:function(e){return Object(r.b)(this,void 0,void 0,(function(){var o,d,s,p,f,g,b;return Object(r.d)(this,(function(m){switch(m.label){case 0:return o=Object(l.c)(e),d=o.type,s=o.callId,l.a.includes(d)?[2]:(p=function(e){var t=e.compId;if(t)return n.getTpaComponentContextId(t)||a.getContextIdOfCompId(t)}(o),f=n.getTpaComponentIdFromTemplate(o.compId),g=null!=f?f:o.compId,b=Object(r.a)(Object(r.a)({},o),{compId:g,origin:e.origin}),c&&c.tpa.addMessage({message:b,compId:g,contextId:p}),p?[4,(v=p,Object(r.b)(void 0,void 0,Promise,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,t(v)];case 1:return[2,e.sent().getAllImplementersOnPageOf(u.d)[0]]}}))})))]:(console.error("TPA handler message caller does not belong to any page",{type:d,callId:s,compId:g}),[2]));case 1:return m.sent().handleMessage(e.source,b).catch((function(e){console.error("HandleTpaMessageError",d,p,g,e),i.captureError(e,{tags:{feature:"tpa",handlerName:d},extra:{handlerName:d,compId:g}})})),[2]}var v}))}))}})}}}))},597:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(9),a=n.n(r),o=n(7),i=n(412),c=n(230),u=Object(o.h)([i.b,c.a],(function(e,t){var n={};return{cacheProps:function(t,r){var o=a.a.omitBy(r||e.get(t),a.a.isFunction);n[t]=a.a.isEmpty(o)?null:o},getCachedProps:function(e){var r,o,i,c,u=n[e];if(u)return a.a.isEqual(null===(o=null===(r=t.getCurrentRouteInfo())||void 0===r?void 0:r.dynamicRouteData)||void 0===o?void 0:o.publicData,null===(c=null===(i=t.getPreviousRouterInfo())||void 0===i?void 0:i.dynamicRouteData)||void 0===c?void 0:c.publicData)||delete u.src,u}}}))},598:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),a=Object(r.h)([],(function(){var e={},t={};return{registerTpasForContext:function(t,n){n.forEach((function(n){e[n]=t}))},getTpaComponentContextId:function(t){return e[t]},registerTpaTemplateId:function(e,n){t[e]=n},getTpaComponentIdFromTemplate:function(e){return t[e]}}}))},599:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(7),o=n(24),i=n(34),c=n(420),u=n(237),d=n(9),s=n.n(d),l=n(573),p=Object(a.h)([Object(a.f)(o.f,u.g),i.b,Object(a.e)(c.c)],(function(e,t,n){var a=e.widgetsClientSpecMapData,o=e.externalBaseUrl,i=e.requestUrl;return{buildSrc:function(e,c,u,d,p){void 0===p&&(p={});var f,g=a[u.widgetId]||{},b=s.a.merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},p),m={compId:e,pageId:c,tpaCompData:u,options:b},v=s.a.assign.apply(s.a,Object(r.g)([{}],n.map((function(e){return e.getQueryParams(m)})))),h=b.tpaInnerRouteConfig?function(e,n){var a,c=Boolean(n.tpaPageUri&&!s.a.isNil(g.applicationId)&&g.applicationId===n.tpaApplicationId),u=Object(r.e)(((null==t?void 0:t.location.href)||i).replace(o,"").split("?"),1)[0],d=Object(r.e)(decodeURIComponent(u).split("?"),2),p=d[0],f=d[1],b=c&&Object(l.a)(p,n.tpaPageUri);return b&&(null===(a=g.appPage)||void 0===a?void 0:a.defaultPage)&&b.unshift(g.appPage.defaultPage),b?function(e,t,n){if(0===e.length)return t;var r=e.join("/"),a=new URL(t);(a.pathname+="/"+r,n)&&new URLSearchParams(n).forEach((function(e,t){return a.searchParams.append(t,e)}));return a.href}(b,e,f):e}(d,b.tpaInnerRouteConfig):d;try{(f=new URL(h)).pathname=s.a.trimEnd(f.pathname,"/")}catch(e){return""}return s.a.entries(v).forEach((function(e){var t=Object(r.e)(e,2),n=t[0],a=t[1];s.a.isNil(a)||f.searchParams.set(n,a)})),f.href}}}))},600:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),a=Object(r.h)([],(function(){var e={},t={};return{registerTpaSection:function(n,r){e[n]=r,t[r.appDefinitionId]=n},unregisterTpaSection:function(n){var r=e[n],a=null==r?void 0:r.appDefinitionId;delete e[n],a&&delete t[a]},getTpaSectionByAppDefinitionId:function(n){var r=t[n];return e[r]}}}))},601:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return I})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return j})),n.d(t,"a",(function(){return C}));var r=n(0),a=n(7),o=n(25),i=n(24),c=n(34),u=n(405),d=n(230),s=n(412),l=n(237),p=n(9),f=n.n(p),g=n(31),b=n(30),m=Object(a.h)([Object(a.f)(i.f,l.g)],(function(e){return{getQueryParams:function(t){var n=t.compId,a=t.pageId,o=t.tpaCompData,i=t.options.extraQueryParams,c=e.siteRevision,u=e.viewMode,d=e.deviceType,s=e.locale,l=e.tpaDebugParams,p=e.timeZone,g=o.templateId,b=o.externalId,m=o.width,v=o.height;return Object(r.a)(Object(r.a)({pageId:a,compId:g||n,viewerCompId:n,siteRevision:""+c,viewMode:u,deviceType:d,externalId:b,locale:s,tz:p,width:f.a.isNumber(m)?""+m:null,height:f.a.isNumber(v)?""+v:null},l),i)}}})),v=Object(a.h)([Object(a.f)(i.f,l.g),o.a],(function(e,t){var n=e.widgetsClientSpecMapData;return{getQueryParams:function(e){var r=e.tpaCompData,a=e.options,o=(n[r.widgetId]||{}).appDefinitionId||a.appDefinitionId||"";return{instance:t.getAppInstanceByAppDefId(o)}}}})),h=Object(a.h)([Object(a.f)(i.f,l.g),c.b],(function(e,t){return{getQueryParams:function(){var n,r=e.requestUrl,a=e.extras,o=new URL((null===(n=null==t?void 0:t.location)||void 0===n?void 0:n.href)||r);return{currency:a.currency,currentCurrency:o.searchParams.get("currency")||a.currency}}}})),I=Object(a.h)([u.b],(function(e){var t=e.viewerSessionId;return{getQueryParams:function(){return{vsi:t}}}})),O=Object(a.h)([g.a],(function(e){return{getQueryParams:function(){var t,n=e.getCurrentConsentPolicy();return{"consent-policy":(t=n).defaultPolicy&&f.a.every(t.policy)||!e._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(e._getConsentPolicyHeader()["consent-policy"])}}}})),y=Object(a.h)([b.a],(function(e){return{getQueryParams:function(){return{commonConfig:JSON.stringify(e.getCommonConfigForUrl())}}}})),j=Object(a.h)([d.a],(function(e){return{getQueryParams:function(){var t,n,r=null===(n=null===(t=e.getCurrentRouteInfo())||void 0===t?void 0:t.dynamicRouteData)||void 0===n?void 0:n.publicData;return{routerData:r?JSON.stringify(r):null}}}})),C=Object(a.h)([Object(a.f)(i.f,l.g),s.d,c.b],(function(e,t,n){return{getQueryParams:function(a){var o,i=a.compId,c=a.tpaCompData,u=a.options,d=e.widgetsClientSpecMapData,s=e.appSectionParams,l=e.isMobileView,p=e.requestUrl,f=e.viewMode,g=e.externalBaseUrl,b={target:null,"section-url":null};if(c.widgetId){var m=d[c.widgetId],v=m.widgetUrl,h=m.mobileUrl,I=l&&h||v,O=((null===(o=t.get(i))||void 0===o?void 0:o.componentType)||"").toLowerCase().endsWith("section");c.isSection&&O&&("site"===f?(b["section-url"]=g+"/"+u.tpaInnerRouteConfig.tpaPageUri+"/",b.target="_top"):(b["section-url"]=I,b.target="_self"))}return Object(r.a)(Object(r.a)({},function(){var e;if(n){var t=new URL((null===(e=null==n?void 0:n.location)||void 0===e?void 0:e.href)||p).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(t||"{}"))||{}}return s}()),b)}}}))},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(7),o=n(24),i=n(237),c=n(9),u=n.n(c),d=Object(a.h)([Object(a.f)(o.f,i.g)],(function(e){var t=e.metaSiteId,a={},o=function(e,t,n){return a[n]},i=function(e,n,r,o){return e.namespace=a[o],e.scope=t,e},c=u.a.once((function(){return Object(r.b)(void 0,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(4),n.e(161)]).then(n.bind(null,779))];case 1:return(new(e.sent().FrameStorageListener)).start(o,i),[2]}}))}))}));return{registerToDataCapsule:function(e,t){c(),a[e]=t},unregister:function(e){delete a[e]}}}))},603:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(7),o=n(237),i=n(270),c=n(129),u=n(503),d=Object(a.h)([i.a,o.d,Object(a.g)(c.a)],(function(e,t,n){return setTimeout((function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!(!e.source||!Object(u.b)(Object(u.c)(e)))},handleEvent:function(e){return Object(r.b)(this,void 0,void 0,(function(){var a,o,i;return Object(r.d)(this,(function(r){return a=Object(u.c)(e),o=a.type,i=a.compId,u.a.includes(o)||(n&&n.tpa.addMessage({message:a,compId:i,contextId:"editor"}),t.handleMessage(e.source,a).catch((function(e){console.error("HandleTpaMessageError",o,"editor",i,e)}))),[2]}))}))}})}),1e3),{}}))}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaCommons.16c4de60.chunk.min.js.map